CONTRACT_TYPE
{
	name = PolarRepeatable
	group = UncrewedExploration
	
	title = Low Polar orbit of @targetBody

	description = Design and successfully launch a probe into @targetBody low polar orbit and successfully transmit some scientific data from as many different biomes as possible.
	
	synopsis = Achieve @targetBody low polar orbit and receive data.
	
	completedMessage = Orbit confirmed, and we got some excellent new data!

	maxSimultaneous = 2
	minExpiry = 1.0
	maxExpiry = 30.0
	cancellable = true
	declinable = true
	autoAccept = false

	targetBody = OrbitedBodies().Exclude(HomeWorld()).Random()

	prestige = Significant

	//Rewards, still WIP
	advanceFunds = 30000.0
	rewardReputation = 60.0
	rewardScience = 10.0
	rewardFunds = 30000.0
	failureReputation = 60.0
	failureFunds = 40000.0

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = first_MoonOrbitUncrewed
	}

	DATA
    	{
        	type = string
        	uniquenessCheck = GROUP_ACTIVE
        	bodyUniqueCheck = @targetBody
    	}

	DATA
	{
		title = deadline
		type = double
		Deadline = Pow(Period(@targetBody)/86400,0.5) + 365
	}

	DATA
    	{
        	type = List<ScienceExperiment>
        	experiments = AvailableExperiments(@targetBody).ExcludeAll([ evaReport, crewReport, asteroidSample, surfaceSample ])
    	}
    	
	DATA
    	{
        	type = ScienceExperiment
        	experiment = @experiments.Random()
    	}
	PARAMETER
	{
		name = vesselGroup
		type = VesselParameterGroup
		title = Achieve @targetBody orbit and transmit a @experiment from orbit
		define = MercuryOrbitCraft
			
		PARAMETER
		{
		name = PartValidation
		type = PartValidation

			MODULE
    			{
        			name = ModuleScienceExperiment
        			experimentID = @experiment
    			}
		}
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
		}
		PARAMETER
		{
    		name = CollectScience
    		type = CollectScience
		targetBody = @targetBody
		situation = InSpaceLow
		recoveryMethod = Transmit
		experiment = @ScienceExperiment
		}

	PARAMETER
	{
		name = Orbit
		type = Orbit
		targetBody = @targetBody
		minInclination = 80
		maxInclination = 100
		maxApA = Random(SpaceAltitudeThreshold(@targetBody),SpaceAltitudeThreshold(@targetBody)*0.6)
		maxEccentricity = 0.1
	}

	
		PARAMETER
		{
			name = CollectScience
    			type = CollectScience
			targetBody = @targetBody
			situation = InSpaceLow
			recoveryMethod = Transmit
			optional = true
			rewardScience = 5.0
			rewardFunds = 100000.0
			experiment = @Experiment
			ITERATOR
			{
				type = Biome
        			biome = @/biomes
			}	
		}
	}
}
